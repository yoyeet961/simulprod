typeof Roblox=="undefined"&&(Roblox={});Roblox.autorefreshHelpers=function(){function t(){var n=$("#completed-value"),t;return n?(t=n.data("value"),t==="True"):!1}function i(n){var t=n.data("completed-value");return t&&t==="True"}function r(n){var t=n.attr("id");return t||(t=n.data("id")),t}function f(n,t=1e4,i){$("."+n).each(function(){var n=$(this);u(n,t,i)})}function e(n,t=1e4,i){var r=$("#"+n);u(r,t,i)}function u(u,f,e){if(!t()&&!i(u)){var s=setInterval(o,f,u,e),h=r(u);n[h]=s}}function o(u,f){var o=u.data("url"),e=$.ajax(o,{cache:!1});e.done(function(e){if(f?f(u,e):u.html(e),t()||i(u)){var o=r(u),s=n[o];clearInterval(s);delete n[o]}});e.fail(function(){u.text("Error while refreshing element")})}var n={};return{autorefreshById:e,autorefreshByClass:f}}();typeof Roblox=="undefined"&&(Roblox={});Roblox.deploymentActions=function(){"use strict";var n={Validated:"Are you sure you want to proceed with deployment to the rest of the servers?",RollBack:"Are you sure you want to roll back this deployment?",RetryFailures:"Are you sure you want to retry failure(s) for this deployment?",Abort:"Are you sure you want to abort this deployment?",ConfirmEnqueueDeployment:"Are you sure you want to enqueue the deployment?",SelectEnvironmentToDeploy:"Please select a target environment to deploy",SelectEnvironmentFirst:"[ Select environment first ]",ServersLoading:"[ Loading servers... ]",ConfirmRedoDeployment:"Are you sure you want to re-queue this deployment?",ConfirmPatch:"Are you sure you want to create a release branch from this deployment?",ValidatedCanaries:"Are you sure you want to proceed with deployment to the rest of the servers?"},t=function(t,i,r){var o=t.closest("tr"),s=o.data("id"),u=t.data("status"),f=n[u],e=t.data("extra-message");e&&(f+="<br><br>"+e);bootbox.confirm(f,function(n){if(n){var t="/Deployments/UpdateStatus?id="+s+"&status="+u;$.post(t).done(i).fail(r)}})},i=function(t,i,r){var u=t.closest("tr"),f=u.data("id");bootbox.confirm(n.ConfirmRedoDeployment,function(n){if(n){var t="/Deployments/Redo?id="+f;$.post(t).done(i).fail(r)}})},r=function(t,i,r){var u=t.closest("tr"),f=u.data("id");bootbox.confirm(n.ConfirmPatch,function(n){if(n){var t="/Deployments/Patch?id="+f;$.post(t).done(i).fail(r)}})};return{currentDeploymentUpdate:t,redoDeploymentUpdate:i,createReleaseBranch:r}}();$(function(){function i(n){if(n.Success){var t="deployment-"+n.Id;$("#"+t).data("completed-value","False");Roblox.autorefreshHelpers.autorefreshById(t,1100)}else bootbox.alert(n.Message)}function r(n){n.Success?bootbox.alert("Success!, find your branch at "+n.Message):bootbox.alert(n.Message)}Roblox.select2helpers.setupStandardSelect2s();Roblox.select2helpers.setupSelect2FormSubmit($("#options-form"));Roblox.select2helpers.setupHelp();Roblox.select2helpers.setupKeyboardShortcuts();Roblox.autorefreshHelpers.autorefreshByClass("deployment-row");var n=$("#deployment-list"),t=function(n,t,i){bootbox.alert("An error has occured: "+i)};n.on("click","button[data-current-deployment]",null,function(){Roblox.deploymentActions.currentDeploymentUpdate($(this),i,t)});n.on("click","a[data-current-deployment]",null,function(){Roblox.deploymentActions.currentDeploymentUpdate($(this),i,t)});n.on("click","button[data-redo-deployment]",null,function(){Roblox.deploymentActions.redoDeploymentUpdate($(this),i,t)});n.on("click","a[data-redo-deployment]",null,function(){Roblox.deploymentActions.redoDeploymentUpdate($(this),i,t)});n.on("click","a[data-patch]",null,function(){Roblox.deploymentActions.createReleaseBranch($(this),r,t)})})