function changeSearchCategoryLabelAndDropdownList(){var t=$("#search-servers-category option:selected").text(),n,i,r;$("#search-servers-category-list-label").text(t);switch(t){case"Server Farm":n="ServerFarms";break;case"Server Group":n="ServerGroups";break;case"Super Farm":n="SuperFarms";break;case"Component":default:n="Components"}i="https://graphql-infra.simulprod.com/graphql?query=";r=i+"{"+n+"{Name}}";$.getJSON(r,function(t){$("#search-servers-category-list").empty();$.each(t.data[n],function(n,t){$("#search-servers-category-list").append($("<option>",{value:t.Name,text:truncate(t.Name,80),title:t.Name}))})})}function ServerExplorer(){var e,r,o;$("#clicksearch").hide();$("#noresultsfound").hide();$("#nav").empty();$("#search-servers-table-results").empty();$("#loading").show();var i,t,u,f=window.location.href,n=f.substring(f.lastIndexOf("/")+1);n==="servers-by-environment"&&(n=1);e=$("#search-servers-category option:selected").text();r=$("#search-servers-category-list option:selected").text();switch(e){case"Server Farm":i="ServerFarms";t="ServersWithServerFarm";u='{ ServerFarms(Name:"'+r+'"){ Name ServersWithServerFarm(EnvironmentID:'+n+"){ ID Name HostName Environment{ Name } ServerStatus { Name } PrimaryIPAddress PublicIPAddress PrivateIPAddress Updated ServerType{ Name } } } }";break;case"Server Group":i="ServerGroups";t="Servers";u='{ ServerGroups(Name:"'+r+'"){ Name Description Servers(EnvironmentID:'+n+"){ ID Name HostName Environment{ Name } ServerStatus { Name } PrimaryIPAddress PublicIPAddress PrivateIPAddress Updated ServerType{ Name } } } }";break;case"Super Farm":i="SuperFarms";t="Servers";u='{ SuperFarms(Name:"'+r+'"){ Name Description Servers(EnvironmentID:'+n+"){ ID Name HostName Environment{ Name } ServerStatus { Name } PrimaryIPAddress PublicIPAddress PrivateIPAddress Updated ServerType{ Name } } } }";break;case"Component":default:i="Components";t="Servers";u=n===1?'{ Components(Name: "'+r+'") { ComponentSuperFarmsWithComponent { SuperFarm { Description Name Servers(EnvironmentID:'+n+") { ID Name HostName Environment{ Name } ServerStatus { Name } PrimaryIPAddress PublicIPAddress PrivateIPAddress Updated ServerType { Name } } } } } }":'{ Components(Name: "'+r+'") { Name ServerGroup { Name Servers(EnvironmentID:'+n+") { ID Name HostName Environment{ Name } ServerStatus { Name } PrimaryIPAddress PublicIPAddress PrivateIPAddress Updated ServerType { Name } } } } }"}o="https://graphql-infra.simulprod.com/graphql?query="+u;$.getJSON(o,function(r){var u=r.data[i];u.forEach(function(r){var u=[],f;i==="Components"?n===1?(f=r.ComponentSuperFarmsWithComponent,f.forEach(function(n){var i=n.SuperFarm;u=u.concat(i[t])})):u=r.ServerGroup[t]:u=r[t];u.length===0&&$("#noresultsfound").show();$.each(u,function(n,t){if(t){var i="https://devops.roblox.local/Servers/ServerDetails/"+t.ID,r=$("#search-servers-status-new option:selected").text();(r.toLowerCase()==="any"||t.ServerStatus.Name.toLowerCase()===r.toLowerCase())&&$("<tr>").append($("<td>").append('<a href="'+i+'">'+t.ID+"<\/a>"),$("<td>").append('<a href="'+i+'">'+t.Name+"<\/a>"),$("<td>").append('<a href="'+i+'">'+t.HostName+"<\/a>"),$("<td>").text(t.Environment.Name),$("<td>").text(t.ServerStatus.Name),$("<td>").text(t.ServerType.Name),$("<td>").append('<a href="'+i+'">'+t.PrimaryIPAddress+"<\/a>"),$("<td>").append('<a href="'+i+'">'+t.PublicIPAddress+"<\/a>"),$("<td>").append('<a href="'+i+'">'+t.PrivateIPAddress+"<\/a>"),$("<td>").text(t.Updated)).appendTo("#search-servers-table-results")}});pagination();$("#loading").hide()})})}function truncate(n,t){return n.length>t?n.substring(0,t)+"...":n}function pagination(){var t;$("#search-servers-table").after('<div id="nav" align="center"><\/div>');var r=$("#search-servers-table-results tr").length,n=Math.ceil(r/25);for($("#nav").append('<ul class="pagination"><\/ul>'),$(".pagination").append('<li rel="far prev"><a href="javascript:;"><< <<<\/a><\/li>'),$(".pagination").append('<li rel="prev"><a href="javascript:;"><<<\/a><\/li>'),$(".pagination").append('<li rel="dots prev"><a style="pointer-events: none; cursor: default;" href="javascript:;">...<\/a><\/li>'),i=0;i<n;i++)t=i+1,$(".pagination").append('<li rel="'+i+'"><a href="javascript:;">'+t+"<\/a><\/li>");$(".pagination").append('<li rel="dots next"><a style="pointer-events: none; cursor: default;" href="javascript:;">...<\/a><\/li>');$(".pagination").append('<li rel="next"><a href="javascript:;">>><\/a><\/li>');$(".pagination").append('<li rel="far next"><a href="javascript:;">>> >><\/a><\/li>');n<=1&&$("#nav").hide();$("#nav li[rel='0']").addClass("active");$("#nav li").bind("click",function(){navigationHelper(this)});navigationHelper($("#nav li[class='active']"))}function navigationHelper(n){var e=25,c=$("#search-servers-table-results tr").length,u=Math.ceil(c/e),t=parseInt($("#nav li[class='active']").attr("rel")),f=10,i=3,r;$("#nav li").removeClass("active");r=$(n).attr("rel");r==="far prev"?t=0:r==="prev"?t=t-1:r==="dots prev"||r==="dots next"||(t=r==="next"?t+1:r==="far next"?u-1:parseInt(r));$("#nav li[rel="+t+"]").addClass("active");var o=i+t,s=2*i+u,h=t*e,l=h+e;$("#search-servers-table-results tr").css("opacity","0.0").hide().slice(h,l).css("display","table-row").animate({opacity:1},300);u<=10?$("#nav li").css("opacity","0.0").hide().slice(i,i+u).css("display","inline").animate({opacity:1},300):t<f/2?($("#nav li").css("opacity","0.0").hide().slice(i,i+f).css("display","inline").animate({opacity:1},300),$("#nav li").slice(-1*i).css("display","inline").animate({opacity:1},300),t!==0&&$("#nav li").slice(1,2).css("display","inline").animate({opacity:1},300)):t>=u-f/2?($("#nav li").css("opacity","0.0").hide().slice(s-f-i,s-i).css("display","inline").animate({opacity:1},300),$("#nav li").slice(0,i).css("display","inline").animate({opacity:1},300),t!==u-1&&$("#nav li").slice(-2,-1).css("display","inline").animate({opacity:1},300)):($("#nav li").css("opacity","0.0").hide().slice(o-f/2,o+f/2).css("display","inline").animate({opacity:1},300),$("#nav li").slice(0,i).css("display","inline").animate({opacity:1},300),$("#nav li").slice(-1*i).css("display","inline").animate({opacity:1},300))}$("ul.nav-pills li a").click(function(){changeSearchCategoryLabelAndDropdownList()});changeSearchCategoryLabelAndDropdownList();$("#loading").hide();$("#noresultsfound").hide();$("#search-servers-status-new").select2();$("#search-servers-category").select2();$("#search-servers-category-list").select2()